<!DOCTYPE html><html lang="ja"><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@site"/><meta name="twitter:creator" content="@handle"/><meta property="og:type" content="website"/><meta property="og:image:alt" content="KaisNote"/><meta property="og:image:type" content="image/svg+xml"/><meta property="og:image:width" content="512"/><meta property="og:image:height" content="512"/><meta property="og:site_name" content="KaisNote"/><link rel="icon" href="../../kaisnote_icon.svg"/><link rel="icon" href="../../favicon.ico"/><link rel="icon" type="image/png" sizes="16x16" href="../../favicons/favicon-16x16.png"/><link rel="icon" type="image/png" sizes="32x32" href="../../favicons/favicon-32x32.png"/><link rel="apple-touch-icon" sizes="180x180" href="../../favicons/apple-touch-icon.png"/><link rel="mask-icon" href="../../favicons/safari-pinned-tab.svg" color="#9c8cb8"/><title>アニメーションを使いまわすための「motion+Slot」戦略</title><meta name="robots" content="index,follow"/><meta name="description" content="Framer MotionのmotionコンポーネントとRadix UIのユーティリティのコンポーネントSlotを組み合わせることで、アニメーションの再利用性を爆上げします。"/><meta property="og:title" content="アニメーションを使いまわすための「motion+Slot」戦略"/><meta property="og:description" content="Framer MotionのmotionコンポーネントとRadix UIのユーティリティのコンポーネントSlotを組み合わせることで、アニメーションの再利用性を爆上げします。"/><meta property="og:url" content="https://kaim-ru.github.io/kais-note/"/><meta property="og:image" content="https://kaim-ru.github.io/kais-note/assets/blog/dynamic-routing/cover.jpg"/><meta name="next-head-count" content="24"/><link rel="preload" href="/kais-note/_next/static/css/cf3a013594e7c03e.css" as="style"/><link rel="stylesheet" href="/kais-note/_next/static/css/cf3a013594e7c03e.css" data-n-g=""/><link rel="preload" href="/kais-note/_next/static/css/b6d637a7442307d2.css" as="style"/><link rel="stylesheet" href="/kais-note/_next/static/css/b6d637a7442307d2.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/kais-note/_next/static/chunks/polyfills-5cd94c89d3acac5f.js"></script><script src="/kais-note/_next/static/chunks/webpack-9280f78dc02bc3fb.js" defer=""></script><script src="/kais-note/_next/static/chunks/framework-5f4595e5518b5600.js" defer=""></script><script src="/kais-note/_next/static/chunks/main-2efd17b8215925a3.js" defer=""></script><script src="/kais-note/_next/static/chunks/pages/_app-8267d4927600bacf.js" defer=""></script><script src="/kais-note/_next/static/chunks/78e521c3-fe1392919ee908e6.js" defer=""></script><script src="/kais-note/_next/static/chunks/pages/posts/%5Bslug%5D-7045f04961d961e2.js" defer=""></script><script src="/kais-note/_next/static/UUSLLqftaeAa2BiITqTPT/_buildManifest.js" defer=""></script><script src="/kais-note/_next/static/UUSLLqftaeAa2BiITqTPT/_ssgManifest.js" defer=""></script><script src="/kais-note/_next/static/UUSLLqftaeAa2BiITqTPT/_middlewareManifest.js" defer=""></script></head><body><script>
                (function() {
                  const stored = localStorage.getItem('darkMode');
                  const isDark = stored !== null ? stored === 'true' : true;
                  if (isDark) {
                    document.documentElement.classList.add('dark');
                  }
                })();
              </script><div id="__next" data-reactroot=""><div style="grid-template-rows:auto 1fr auto" class="grid min-h-screen gap-0 bg-[#130f18]"><header class="w-full bg-white dark:bg-[#251f2e] h-[51px] sticky top-0 z-50 shadow-md overflow-hidden"><div class="max-w-[1600px] w-full mx-auto h-full flex items-center justify-between px-2 sm:px-4"><a class="flex items-center h-[33px] hover:opacity-80 transition-opacity" href="/kais-note/"><img src="/kais-note/kaisnote_title.svg" alt="KaisNote" class="object-contain w-auto h-full"/></a><nav class="items-center hidden gap-2 md:flex md:gap-3 lg:gap-6 xl:gap-8 -translate-x-[20px]"><div class="flex items-center gap-2 md:gap-3 lg:gap-4"><a class="flex items-center gap-1.5 transition-opacity group" href="/kais-note/posts/page/1/"><img src="/kais-note/assets/by_files.svg" alt="ファイル別もくじ" class="w-auto h-[14px] lg:h-[16px] svg-icon group-hover:svg-icon-hover transition-all"/></a><a class="flex items-center gap-1.5 transition-opacity group" href="/kais-note/tags/"><img src="/kais-note/assets/by_feature.svg" alt="機能別もくじ" class="w-auto h-[14px] lg:h-[16px] svg-icon group-hover:svg-icon-hover transition-all"/></a><a class="flex items-center gap-1.5 transition-opacity group" href="/kais-note/tags/"><img src="/kais-note/assets/by_tags.svg" alt="タグ別" class="w-auto h-[14px] lg:h-[16px] svg-icon group-hover:svg-icon-hover transition-all"/></a></div><div class="hidden lg:flex w-[200px] xl:w-[280px] 2xl:w-[347px] h-[32px] bg-gray-100 dark:bg-gray-900 border border-gray-300 dark:border-gray-700 bottom-1 rounded-lg items-center px-3 gap-2"><img src="/kais-note/assets/search.svg" alt="検索" class="flex-shrink-0 w-4 h-4 svg-icon"/><input type="text" placeholder="" class="w-full bg-transparent text-gray-600 dark:text-[#9c8cb8] outline-none text-sm"/></div><a class="flex items-center gap-1.5 transition-opacity group" href="/kais-note/about/"><img src="/kais-note/assets/About.svg" alt="About" class="w-auto h-[14px] lg:h-[16px] svg-icon group-hover:svg-icon-hover transition-all"/></a><button class="flex items-center justify-center w-8 h-8 transition-colors bg-gray-200 rounded-full dark:bg-gray-800 hover:bg-gray-300 dark:hover:bg-gray-700" aria-label="ダークモード切り替え"><svg class="w-5 h-5 text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path></svg></button></nav><div class="flex items-center gap-2 md:hidden"><button class="text-gray-700 dark:text-[#9c8cb8] p-2" aria-label="メニュー"><svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div></div></header><div class="px-0 py-0"><div class="w-full max-w-full"><main class="w-full"><div class="w-full min-h-screen bg-gray-50 dark:bg-[#130f18] pb-12 sm:pb-16 md:pb-20"><div class="flex flex-col lg:flex-row gap-4 sm:gap-5 md:gap-6 lg:gap-[51px] px-3 sm:px-4 md:px-6 lg:px-[34px] pt-[50px] sm:pt-[56px] md:pt-[62px] w-full mx-auto max-w-full"><aside class="hidden lg:block lg:w-[20%] xl:w-[18%] flex-shrink-0 sticky top-[67px] self-start"><div class="flex flex-col gap-4 xl:gap-6"><div class="bg-white dark:bg-[#251f2e] rounded-[13px] shadow-[0px_0px_12.5px_6px_rgba(0,0,0,0.1)] dark:shadow-[0px_0px_12.5px_6px_rgba(0,0,0,0.25)] px-[10px] xl:px-[13px] py-[4px]"><h3 class="text-[15px] xl:text-[17px] text-gray-800 dark:text-gray-200 font-medium tracking-[-0.75px] xl:tracking-[-0.85px] h-[34px] xl:h-[38px] flex items-center">アドオン関連：</h3><div class="flex flex-col gap-[2px]"><div class="flex flex-col gap-[2px]"><button class="flex items-center gap-[7px] text-[15px] xl:text-[17px] text-gray-700 dark:text-gray-400 tracking-[-0.75px] xl:tracking-[-0.85px] hover:text-mikxc-primary-400 dark:hover:text-mikxc-primary-200 transition-colors text-left"><span class="transform transition-transform w-[9px] h-[13px] flex items-center justify-center" style="transform:rotate(270deg)"><div class="w-0 h-0 border-l-[5px] border-l-transparent border-r-[5px] border-r-transparent border-b-[7px] border-b-current rotate-[-90deg]"></div></span><span>チュートリアル</span></button><div style="display:block"><div class="flex flex-col gap-0 pl-[10px] xl:pl-[12px] text-[15px] xl:text-[17px] text-gray-600 dark:text-gray-400 tracking-[-0.75px] xl:tracking-[-0.85px]"><div class="h-[26.5px] xl:h-[29.5px] flex items-center">1.はじめに</div><div class="h-[26.5px] xl:h-[29.5px] flex items-center">2.インストール</div></div></div></div><div class="flex flex-col gap-[2px]"><button class="flex items-center gap-[7px] text-[15px] xl:text-[17px] text-gray-600 dark:text-gray-400 tracking-[-0.75px] xl:tracking-[-0.85px] hover:text-mikxc-primary-400 dark:hover:text-mikxc-primary-200 transition-colors text-left"><span class="transform transition-transform w-[9px] h-[13px] flex items-center justify-center" style="transform:rotate(180deg)"><div class="w-0 h-0 border-l-[5px] border-l-transparent border-r-[5px] border-r-transparent border-b-[7px] border-b-current rotate-[-90deg]"></div></span><span>ビヘイビアパック</span></button><div style="display:none"><div class="flex flex-col gap-0 pl-[10px] xl:pl-[12px] text-[15px] xl:text-[17px] text-gray-600 dark:text-gray-400 tracking-[-0.75px] xl:tracking-[-0.85px]"></div></div></div><div class="flex flex-col gap-[2px]"><button class="flex items-center gap-[7px] text-[15px] xl:text-[17px] text-gray-600 dark:text-gray-400 tracking-[-0.75px] xl:tracking-[-0.85px] hover:text-mikxc-primary-400 dark:hover:text-mikxc-primary-200 transition-colors text-left"><span class="transform transition-transform w-[9px] h-[13px] flex items-center justify-center" style="transform:rotate(180deg)"><div class="w-0 h-0 border-l-[5px] border-l-transparent border-r-[5px] border-r-transparent border-b-[7px] border-b-current rotate-[-90deg]"></div></span><span>リソースパック</span></button><div style="display:none"><div class="flex flex-col gap-0 pl-[10px] xl:pl-[12px] text-[15px] xl:text-[17px] text-gray-600 dark:text-gray-400 tracking-[-0.75px] xl:tracking-[-0.85px]"></div></div></div></div></div></div></aside><div class="flex-1 min-w-0 max-w-full lg:max-w-[60%] xl:max-w-[64%] w-full"><article class="bg-white dark:bg-[#251f2e] rounded-[13px] shadow-[0px_0px_12.5px_6px_rgba(0,0,0,0.1)] dark:shadow-[0px_0px_12.5px_6px_rgba(0,0,0,0.25)] overflow-hidden w-full"><div class="relative w-full overflow-hidden"><div class="relative h-[150px] sm:h-[180px] md:h-[204px] w-full rounded-tl-[13px] rounded-tr-[13px] overflow-hidden"><img src="/kais-note/assets/blog/dynamic-routing/cover.jpg" alt="アニメーションを使いまわすための「motion+Slot」戦略" class="w-full h-full object-cover"/><div class="absolute inset-0 bg-gradient-to-b from-transparent via-transparent to-white dark:to-[#251f2e]"></div></div><div class="px-[12px] sm:px-[14px] md:px-[16px] pb-6 sm:pb-7 md:pb-8 w-full"><div class="flex flex-col gap-2 pt-[24px] sm:pt-[30px] md:pt-[36px] pb-6 sm:pb-7 md:pb-8 w-full"><h1 class="text-[24px] sm:text-[28px] md:text-[32px] text-gray-900 dark:text-gray-200 font-bold tracking-[-1.2px] sm:tracking-[-1.4px] md:tracking-[-1.6px] leading-tight break-words">アニメーションを使いまわすための「motion+Slot」戦略</h1><div class="text-[14px] sm:text-[16px] md:text-[18px] text-gray-600 dark:text-gray-400 font-bold tracking-[-0.7px] sm:tracking-[-0.8px] md:tracking-[-0.9px]"><div class="select-none hstack gap-2 text-md font-medium text-accent-1"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg"><g><path fill="none" d="M0 0h24v24H0z"></path><path d="M12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10zm1-10V7h-2v7h6v-2h-4z"></path></g></svg>2022/07/01</div></div><div class="flex flex-wrap gap-2 mt-1 md:mt-2 w-full"><a class="px-2 md:px-3 py-0.5 md:py-1 text-[10px] sm:text-[11px] md:text-xs font-bold text-white bg-teal-600 dark:bg-gray-700 rounded hover:bg-teal-700 dark:hover:bg-gray-600 transition-colors" href="/kais-note/tags/React/">React</a><a class="px-2 md:px-3 py-0.5 md:py-1 text-[10px] sm:text-[11px] md:text-xs font-bold text-white bg-teal-600 dark:bg-gray-700 rounded hover:bg-teal-700 dark:hover:bg-gray-600 transition-colors" href="/kais-note/tags/RadixUI/">RadixUI</a><a class="px-2 md:px-3 py-0.5 md:py-1 text-[10px] sm:text-[11px] md:text-xs font-bold text-white bg-teal-600 dark:bg-gray-700 rounded hover:bg-teal-700 dark:hover:bg-gray-600 transition-colors" href="/kais-note/tags/FramerMotion/">FramerMotion</a></div></div><article class="pb-6 sm:pb-7 md:pb-8 w-full overflow-hidden"><div class="markdown-styles_markdown__BegJd text-[16px] sm:text-[18px] md:text-[20px] text-gray-800 dark:text-gray-400 tracking-[-0.8px] sm:tracking-[-0.9px] md:tracking-[-1px] leading-[1.7] sm:leading-[1.75] md:leading-[1.8] w-full"><p>[<a href="https://stitches.dev/">https://stitches.dev/</a>]</p>
<h2 id="概要"><a aria-hidden="true" tabindex="-1" href="#概要"><span class="icon icon-link"></span></a>概要</h2>
<p>Framer Motion を React Slot で運用すると、アニメーションの再利用性が飛躍的に向上します。</p>
<h3 id="react-slot"><a aria-hidden="true" tabindex="-1" href="#react-slot"><span class="icon icon-link"></span></a>React Slot</h3>
<p><a href="https://www.radix-ui.com/docs/primitives/utilities/slot">https://www.radix-ui.com/docs/primitives/utilities/slot</a></p>
<p><code>Slot</code>は子コンポーネントに props を渡す役割を持ちます。</p>
<p>これが</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">Slot</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">AnyComponent</span></span> <span class="token punctuation">/></span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">Slot</span></span><span class="token punctuation">></span></span>
</code></pre>
<p>実質的にこうなります。</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">AnyComponent</span></span> <span class="token attr-name">color</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>red<span class="token punctuation">"</span></span> <span class="token punctuation">/></span></span>
</code></pre>
<p><code>Slot</code>本体は消えるものの、props を介して任意のコンポーネントに機能を与えられるという点が重要です。余分な<code>div</code>を生成することはありません。</p>
<p>詳しくは<a href="https://zenn.dev/subt/articles/b6aa48ccb0c884">こちら</a>を参照ください。</p>
<h3 id="framer-motion"><a aria-hidden="true" tabindex="-1" href="#framer-motion"><span class="icon icon-link"></span></a>Framer Motion</h3>
<p><a href="https://www.framer.com/motion">https://www.framer.com/motion</a></p>
<p><a href="https://www.framer.com/">Framer</a>が提供しているアニメーションライブラリです。</p>
<p>どんなアニメーションでも、基本的に<strong>props だけ</strong>で完結してしまうのが特徴です。</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>motion.div</span>
  <span class="token attr-name">drag</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>x<span class="token punctuation">"</span></span>
  <span class="token attr-name">dragConstraints</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> left<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span> right<span class="token operator">:</span> <span class="token number">100</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">whileHover</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> scale<span class="token operator">:</span> <span class="token number">1.1</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
  <span class="token attr-name">whileTap</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> scale<span class="token operator">:</span> <span class="token number">0.9</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span>
<span class="token punctuation">/></span></span>
</code></pre>
<p>カスタムコンポーネントは<code>motion</code>関数に渡してアニメーションをつけます。</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token keyword">const</span> <span class="token maybe-class-name">MotionComponent</span> <span class="token operator">=</span> <span class="token function">motion</span><span class="token punctuation">(</span><span class="token maybe-class-name">Component</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token spread operator">...</span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">MotionComponent</span></span> <span class="token attr-name">animate</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span><span class="token punctuation">{</span> scale<span class="token operator">:</span> <span class="token number">0.5</span> <span class="token punctuation">}</span><span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span>
</code></pre>
<h2 id="motionslotで何ができる"><a aria-hidden="true" tabindex="-1" href="#motionslotで何ができる"><span class="icon icon-link"></span></a><code>motion</code>+<code>Slot</code>で何ができる？</h2>
<p><code>motion</code>と<code>Slot</code>を組み合わせて<code>motion(Slot)</code>を作ります。すると、</p>
<p><code>motion</code>が提供してくれる手軽でリッチなアニメーション機能をそのまま、提供元を完全に隠蔽して提供する</p>
<p>ことができるようになります。</p>
<p>何を言っているのか、私もよくわからないので具体例に移りましょう。</p>
<h2 id="具体例"><a aria-hidden="true" tabindex="-1" href="#具体例"><span class="icon icon-link"></span></a>具体例</h2>
<p><code>motion(Slot)</code>を使って、みんな大好き「<a href="https://qiita.com/yuneco/items/24a209cb14661b8a7a20">ふわっ</a>」が手軽に実装できるようにしましょう。</p>
<h3 id="実装"><a aria-hidden="true" tabindex="-1" href="#実装"><span class="icon icon-link"></span></a>実装</h3>
<pre class="language-tsx"><code class="language-tsx"><span class="token keyword module">import</span> <span class="token imports"><span class="token maybe-class-name">React</span></span> <span class="token keyword module">from</span> <span class="token string">'react'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> <span class="token maybe-class-name">Slot</span> <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'@radix-ui/react-slot'</span><span class="token punctuation">;</span>
<span class="token keyword module">import</span> <span class="token imports"><span class="token punctuation">{</span> motion <span class="token punctuation">}</span></span> <span class="token keyword module">from</span> <span class="token string">'framer-motion'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token maybe-class-name">ContentLayout</span> <span class="token operator">=</span> <span class="token function">motion</span><span class="token punctuation">(</span><span class="token maybe-class-name">Slot</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Custom</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  y<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  once<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
  amount<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  duration<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> defaultCustom<span class="token operator">:</span> <span class="token maybe-class-name">Custom</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  y<span class="token operator">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
  once<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
  amount<span class="token operator">:</span> <span class="token number">0.3</span><span class="token punctuation">,</span>
  duration<span class="token operator">:</span> <span class="token number">0.6</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token punctuation">(</span>
  custom<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">Custom</span><span class="token punctuation">,</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ComponentProps</span></span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token maybe-class-name">ContentLayout</span><span class="token operator">></span> <span class="token arrow operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> y<span class="token punctuation">,</span> once<span class="token punctuation">,</span> amount<span class="token punctuation">,</span> duration <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> <span class="token spread operator">...</span>defaultCustom<span class="token punctuation">,</span> <span class="token spread operator">...</span>custom <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword control-flow">return</span> <span class="token punctuation">{</span>
    initial<span class="token operator">:</span> <span class="token punctuation">{</span>
      opacity<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      y<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    whileInView<span class="token operator">:</span> <span class="token punctuation">{</span>
      opacity<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      y<span class="token operator">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    viewport<span class="token operator">:</span> <span class="token punctuation">{</span>
      once<span class="token punctuation">,</span>
      amount<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    transition<span class="token operator">:</span> <span class="token punctuation">{</span>
      duration<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token maybe-class-name">Props</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  children<span class="token operator">:</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ReactNode</span></span><span class="token punctuation">;</span>
  custom<span class="token operator">?</span><span class="token operator">:</span> <span class="token maybe-class-name">Custom</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword module">export</span> <span class="token keyword">const</span> <span class="token maybe-class-name">Enter</span> <span class="token operator">=</span> <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access">forwardRef</span><span class="token operator">&#x3C;</span>
  <span class="token maybe-class-name">React</span><span class="token punctuation">.</span><span class="token property-access"><span class="token maybe-class-name">ElementRef</span></span><span class="token operator">&#x3C;</span><span class="token keyword">typeof</span> <span class="token maybe-class-name">ContentLayout</span><span class="token operator">></span><span class="token punctuation">,</span>
  <span class="token maybe-class-name">Props</span>
<span class="token operator">></span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> children<span class="token punctuation">,</span> custom <span class="token punctuation">}</span><span class="token punctuation">,</span> forwardedRef<span class="token punctuation">)</span> <span class="token arrow operator">=></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">ContentLayout</span></span> <span class="token spread"><span class="token punctuation">{</span><span class="token spread operator">...</span><span class="token method function property-access">config</span><span class="token punctuation">(</span>custom<span class="token punctuation">)</span><span class="token punctuation">}</span></span> <span class="token attr-name">ref</span><span class="token script language-javascript"><span class="token script-punctuation punctuation">=</span><span class="token punctuation">{</span>forwardedRef<span class="token punctuation">}</span></span><span class="token punctuation">></span></span><span class="token plain-text">
    </span><span class="token punctuation">{</span>children<span class="token punctuation">}</span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">ContentLayout</span></span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token maybe-class-name">Enter</span><span class="token punctuation">.</span><span class="token property-access">displayName</span> <span class="token operator">=</span> <span class="token string">'Enter'</span><span class="token punctuation">;</span>
</code></pre>
<h3 id="使い方"><a aria-hidden="true" tabindex="-1" href="#使い方"><span class="icon icon-link"></span></a>使い方</h3>
<p>たったこれだけで、<code>h1</code>がふわっと入場します。</p>
<pre class="language-tsx"><code class="language-tsx"><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span><span class="token class-name">Enter</span></span><span class="token punctuation">></span></span><span class="token plain-text">
  </span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">Hello CodeSandbox</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span>h1</span><span class="token punctuation">></span></span><span class="token plain-text">
</span><span class="token tag"><span class="token tag"><span class="token punctuation">&#x3C;/</span><span class="token class-name">Enter</span></span><span class="token punctuation">></span></span>
</code></pre>
<p>CodeSandbox に使用例を上げました。</p>
<p>@<a href="https://codesandbox.io/embed/nifty-fast-gs8cjy?fontsize=14&#x26;hidenavigation=1&#x26;theme=dark">codesandbox</a></p>
<p>ぜひ、別窓で開いて余計な<code>div</code>が生成されていないことをお確かめください。</p>
<h3 id="注意点"><a aria-hidden="true" tabindex="-1" href="#注意点"><span class="icon icon-link"></span></a>注意点</h3>
<p><code>motion</code>は内部的に ref を使用します。なので、対象のコンポーネントがカスタムコンポーネントである場合、正しく ref をフォワーディングしている必要があります。</p>
<p>ref や<code>forwardRef</code>をご存知ない方は、調べてみてください。きっと、<code>Slot</code>や<code>motion</code>に比べてはるかに多くの記事がヒットするでしょう。</p>
<h2 id="まとめ"><a aria-hidden="true" tabindex="-1" href="#まとめ"><span class="icon icon-link"></span></a>まとめ</h2>
<p><code>motion(Slot)</code>で再利用性バツグンのアニメーションコンポーネントを作ることができました。</p>
<p>実装自体<code>motion</code>の軽い延長に過ぎないので、簡単にオリジナルのアニメーションコンポーネントが作れると思います。是非お試しください。</p>
<p>私も色々実装してみて、またの機会に紹介したいと思います。</p></div></article></div></div></article></div><aside class="hidden xl:block xl:w-[18%] flex-shrink-0 top-[67px] self-start"><div class="bg-white dark:bg-[#251f2e] rounded-[13px] shadow-[0px_0px_12.5px_6px_rgba(0,0,0,0.1)] dark:shadow-[0px_0px_12.5px_6px_rgba(0,0,0,0.25)] p-4 h-[200px]"></div></aside></div></div></main></div></div><footer class="w-full overflow-x-hidden"><div class="p-10 center bg-gray-100 dark:bg-[#251f2e] max-w-full"><div class="items-center gap-4 vstack"><div class="flex gap-4"><a class="text-gray-600 dark:text-[#9c8cb8] hover:text-gray-800 dark:hover:text-[#bbadd2] active:text-gray-500 dark:active:text-[#756293] transition duration-100" aria-label="Zenn" href="https://zenn.dev"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M.264 23.771h4.984c.264 0 .498-.147.645-.352L19.614.874c.176-.293-.029-.645-.381-.645h-4.72c-.235 0-.44.117-.557.323L.03 23.361c-.088.176.029.41.234.41zM17.445 23.419l6.479-10.408c.205-.323-.029-.733-.41-.733h-4.691c-.176 0-.352.088-.44.235l-6.655 10.643c-.176.264.029.616.352.616h4.779c.234-.001.468-.118.586-.353z"></path></svg></a><a class="text-gray-600 dark:text-[#9c8cb8] hover:text-gray-800 dark:hover:text-[#bbadd2] active:text-gray-500 dark:active:text-[#756293] transition duration-100" aria-label="Github" href="https://github.com"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-gray-600 dark:text-[#9c8cb8] hover:text-gray-800 dark:hover:text-[#bbadd2] active:text-gray-500 dark:active:text-[#756293] transition duration-100" aria-label="Twitter" href="https://twitter.com"><svg stroke="currentColor" fill="currentColor" stroke-width="0" role="img" viewBox="0 0 24 24" height="20" width="20" xmlns="http://www.w3.org/2000/svg"><title></title><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg></a></div><div class="text-gray-600 dark:text-[#9c8cb8] text-sm text-center">© 2022 - <!-- -->kais-note</div></div></div></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"アニメーションを使いまわすための「motion+Slot」戦略","date":"2022-07-01","slug":"motion-slot","content":"\u003cp\u003e[\u003ca href=\"https://stitches.dev/\"\u003ehttps://stitches.dev/\u003c/a\u003e]\u003c/p\u003e\n\u003ch2 id=\"概要\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#概要\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e概要\u003c/h2\u003e\n\u003cp\u003eFramer Motion を React Slot で運用すると、アニメーションの再利用性が飛躍的に向上します。\u003c/p\u003e\n\u003ch3 id=\"react-slot\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#react-slot\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eReact Slot\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://www.radix-ui.com/docs/primitives/utilities/slot\"\u003ehttps://www.radix-ui.com/docs/primitives/utilities/slot\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003eSlot\u003c/code\u003eは子コンポーネントに props を渡す役割を持ちます。\u003c/p\u003e\n\u003cp\u003eこれが\u003c/p\u003e\n\u003cpre class=\"language-tsx\"\u003e\u003ccode class=\"language-tsx\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eSlot\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ecolor\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003ered\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\n  \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eAnyComponent\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\n\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eSlot\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e実質的にこうなります。\u003c/p\u003e\n\u003cpre class=\"language-tsx\"\u003e\u003ccode class=\"language-tsx\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eAnyComponent\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003ecolor\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003ered\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003e\u003ccode\u003eSlot\u003c/code\u003e本体は消えるものの、props を介して任意のコンポーネントに機能を与えられるという点が重要です。余分な\u003ccode\u003ediv\u003c/code\u003eを生成することはありません。\u003c/p\u003e\n\u003cp\u003e詳しくは\u003ca href=\"https://zenn.dev/subt/articles/b6aa48ccb0c884\"\u003eこちら\u003c/a\u003eを参照ください。\u003c/p\u003e\n\u003ch3 id=\"framer-motion\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#framer-motion\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eFramer Motion\u003c/h3\u003e\n\u003cp\u003e\u003ca href=\"https://www.framer.com/motion\"\u003ehttps://www.framer.com/motion\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://www.framer.com/\"\u003eFramer\u003c/a\u003eが提供しているアニメーションライブラリです。\u003c/p\u003e\n\u003cp\u003eどんなアニメーションでも、基本的に\u003cstrong\u003eprops だけ\u003c/strong\u003eで完結してしまうのが特徴です。\u003c/p\u003e\n\u003cpre class=\"language-tsx\"\u003e\u003ccode class=\"language-tsx\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003emotion.div\u003c/span\u003e\n  \u003cspan class=\"token attr-name\"\u003edrag\u003c/span\u003e\u003cspan class=\"token attr-value\"\u003e\u003cspan class=\"token punctuation attr-equals\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003ex\u003cspan class=\"token punctuation\"\u003e\"\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token attr-name\"\u003edragConstraints\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e left\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token operator\"\u003e-\u003c/span\u003e\u003cspan class=\"token number\"\u003e100\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e right\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e100\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token attr-name\"\u003ewhileHover\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e scale\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1.1\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\n  \u003cspan class=\"token attr-name\"\u003ewhileTap\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e scale\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0.9\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eカスタムコンポーネントは\u003ccode\u003emotion\u003c/code\u003e関数に渡してアニメーションをつけます。\u003c/p\u003e\n\u003cpre class=\"language-tsx\"\u003e\u003ccode class=\"language-tsx\"\u003e\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eMotionComponent\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003emotion\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eComponent\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\n\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eMotionComponent\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eanimate\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e scale\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0.5\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e/\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"motionslotで何ができる\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#motionslotで何ができる\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e\u003ccode\u003emotion\u003c/code\u003e+\u003ccode\u003eSlot\u003c/code\u003eで何ができる？\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003emotion\u003c/code\u003eと\u003ccode\u003eSlot\u003c/code\u003eを組み合わせて\u003ccode\u003emotion(Slot)\u003c/code\u003eを作ります。すると、\u003c/p\u003e\n\u003cp\u003e\u003ccode\u003emotion\u003c/code\u003eが提供してくれる手軽でリッチなアニメーション機能をそのまま、提供元を完全に隠蔽して提供する\u003c/p\u003e\n\u003cp\u003eことができるようになります。\u003c/p\u003e\n\u003cp\u003e何を言っているのか、私もよくわからないので具体例に移りましょう。\u003c/p\u003e\n\u003ch2 id=\"具体例\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#具体例\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e具体例\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003emotion(Slot)\u003c/code\u003eを使って、みんな大好き「\u003ca href=\"https://qiita.com/yuneco/items/24a209cb14661b8a7a20\"\u003eふわっ\u003c/a\u003e」が手軽に実装できるようにしましょう。\u003c/p\u003e\n\u003ch3 id=\"実装\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#実装\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e実装\u003c/h3\u003e\n\u003cpre class=\"language-tsx\"\u003e\u003ccode class=\"language-tsx\"\u003e\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'react'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eSlot\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'@radix-ui/react-slot'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token keyword module\"\u003eimport\u003c/span\u003e \u003cspan class=\"token imports\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e motion \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token keyword module\"\u003efrom\u003c/span\u003e \u003cspan class=\"token string\"\u003e'framer-motion'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eContentLayout\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token function\"\u003emotion\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token maybe-class-name\"\u003eSlot\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eCustom\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  y\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  once\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003eboolean\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  amount\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  duration\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token builtin\"\u003enumber\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e defaultCustom\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eCustom\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  y\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e20\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  once\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token boolean\"\u003etrue\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  amount\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0.3\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  duration\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0.6\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e config \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  custom\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eCustom\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eComponentProps\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003etypeof\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eContentLayout\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e y\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e once\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e amount\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e duration \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e \u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003edefaultCustom\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e \u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003ecustom \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n  \u003cspan class=\"token keyword control-flow\"\u003ereturn\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n    initial\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      opacity\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      y\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    whileInView\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      opacity\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      y\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token number\"\u003e0\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    viewport\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      once\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n      amount\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    transition\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n      duration\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n    \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword\"\u003etype\u003c/span\u003e \u003cspan class=\"token class-name\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eProps\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\n  children\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eReactNode\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n  custom\u003cspan class=\"token operator\"\u003e?\u003c/span\u003e\u003cspan class=\"token operator\"\u003e:\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eCustom\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token keyword module\"\u003eexport\u003c/span\u003e \u003cspan class=\"token keyword\"\u003econst\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eEnter\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003eforwardRef\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\n  \u003cspan class=\"token maybe-class-name\"\u003eReact\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003e\u003cspan class=\"token maybe-class-name\"\u003eElementRef\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token keyword\"\u003etypeof\u003c/span\u003e \u003cspan class=\"token maybe-class-name\"\u003eContentLayout\u003c/span\u003e\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e\n  \u003cspan class=\"token maybe-class-name\"\u003eProps\u003c/span\u003e\n\u003cspan class=\"token operator\"\u003e\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e children\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e custom \u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e,\u003c/span\u003e forwardedRef\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e \u003cspan class=\"token arrow operator\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003e\n  \u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eContentLayout\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token spread\"\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003e\u003cspan class=\"token spread operator\"\u003e...\u003c/span\u003e\u003cspan class=\"token method function property-access\"\u003econfig\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e(\u003c/span\u003ecustom\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e \u003cspan class=\"token attr-name\"\u003eref\u003c/span\u003e\u003cspan class=\"token script language-javascript\"\u003e\u003cspan class=\"token script-punctuation punctuation\"\u003e=\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003eforwardedRef\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\n    \u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e{\u003c/span\u003echildren\u003cspan class=\"token punctuation\"\u003e}\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\n  \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eContentLayout\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e)\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\n\u003cspan class=\"token maybe-class-name\"\u003eEnter\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e.\u003c/span\u003e\u003cspan class=\"token property-access\"\u003edisplayName\u003c/span\u003e \u003cspan class=\"token operator\"\u003e=\u003c/span\u003e \u003cspan class=\"token string\"\u003e'Enter'\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e;\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"使い方\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#使い方\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e使い方\u003c/h3\u003e\n\u003cp\u003eたったこれだけで、\u003ccode\u003eh1\u003c/code\u003eがふわっと入場します。\u003c/p\u003e\n\u003cpre class=\"language-tsx\"\u003e\u003ccode class=\"language-tsx\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eEnter\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\n  \u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;\u003c/span\u003eh1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003eHello CodeSandbox\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003eh1\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token plain-text\"\u003e\n\u003c/span\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token tag\"\u003e\u003cspan class=\"token punctuation\"\u003e\u0026#x3C;/\u003c/span\u003e\u003cspan class=\"token class-name\"\u003eEnter\u003c/span\u003e\u003c/span\u003e\u003cspan class=\"token punctuation\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eCodeSandbox に使用例を上げました。\u003c/p\u003e\n\u003cp\u003e@\u003ca href=\"https://codesandbox.io/embed/nifty-fast-gs8cjy?fontsize=14\u0026#x26;hidenavigation=1\u0026#x26;theme=dark\"\u003ecodesandbox\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eぜひ、別窓で開いて余計な\u003ccode\u003ediv\u003c/code\u003eが生成されていないことをお確かめください。\u003c/p\u003e\n\u003ch3 id=\"注意点\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#注意点\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003e注意点\u003c/h3\u003e\n\u003cp\u003e\u003ccode\u003emotion\u003c/code\u003eは内部的に ref を使用します。なので、対象のコンポーネントがカスタムコンポーネントである場合、正しく ref をフォワーディングしている必要があります。\u003c/p\u003e\n\u003cp\u003eref や\u003ccode\u003eforwardRef\u003c/code\u003eをご存知ない方は、調べてみてください。きっと、\u003ccode\u003eSlot\u003c/code\u003eや\u003ccode\u003emotion\u003c/code\u003eに比べてはるかに多くの記事がヒットするでしょう。\u003c/p\u003e\n\u003ch2 id=\"まとめ\"\u003e\u003ca aria-hidden=\"true\" tabindex=\"-1\" href=\"#まとめ\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eまとめ\u003c/h2\u003e\n\u003cp\u003e\u003ccode\u003emotion(Slot)\u003c/code\u003eで再利用性バツグンのアニメーションコンポーネントを作ることができました。\u003c/p\u003e\n\u003cp\u003e実装自体\u003ccode\u003emotion\u003c/code\u003eの軽い延長に過ぎないので、簡単にオリジナルのアニメーションコンポーネントが作れると思います。是非お試しください。\u003c/p\u003e\n\u003cp\u003e私も色々実装してみて、またの機会に紹介したいと思います。\u003c/p\u003e","ogImage":{"url":"/assets/blog/dynamic-routing/cover.jpg"},"coverImage":"/assets/blog/dynamic-routing/cover.jpg","excerpt":"Framer MotionのmotionコンポーネントとRadix UIのユーティリティのコンポーネントSlotを組み合わせることで、アニメーションの再利用性を爆上げします。","tags":["React","RadixUI","FramerMotion"]}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"motion-slot"},"buildId":"UUSLLqftaeAa2BiITqTPT","assetPrefix":"/kais-note","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>